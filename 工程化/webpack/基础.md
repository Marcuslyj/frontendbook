## 为什么需要构建工具

- 转换es6、jsx、ts等语法
- css前缀补全、预处理器
- 压缩混淆，代码分割等
- 图片压缩
- 插件



## loaders

webpack开箱即用只支持js、json两种文件类型。

通过loaders去支持其他文件类型，病转化撤更有效模块，添加到依赖图中。



## mode

![1571303109048](D:\testProjects\gitbook\frontendbook\_assets\image\1571303109048.png)

NamedChunksPlugin和NamedModulesPlugin，代码热更新阶段，在控制台打印那个模块热更新。



## babel

两个配置

plugins，一个plugin对应一个功能；

presets，一系列plugins的集合；



## 文件监听

1. #### watch配置项

![1571304432492](D:\testProjects\gitbook\frontendbook\_assets\image\1571304432492.png)

缺点：手动刷新浏览器

原理：轮询判断文件的最后修改时间是否变化。当某个文件发生变化，并不会立即告诉监听者，

是先缓存起来，等待aggregateTimeout（缓存等待时间）



2. #### 热更新

   1. ##### webpack-dev-server

   wds不刷新浏览器

   wds不输出文件，放在内存中（速度优势）

   结合HotModuleReplacementPlugin

   2. ##### webpack-dev-middleware

      将webpack输出的文件传输给服务器

      适用于灵活的定制场景

   

   ![1571305455200](D:\testProjects\gitbook\frontendbook\_assets\image\1571305455200.png)

   Bundle：最终打包的js

   Bundle server：浏览器可以通过localhost:8080的访问

   HMR Runtime注入到bundle.js中，这样可以跟服务器建立链接，通常是websocket

   

   启动阶段：1->2->a->b

   更新：1->2->3->4

   

   

   ## 文件指纹

   方便浏览器利用缓存

   hash：整个项目构建相关，只要有项目文件修改，就变

   chunkhash：entry相关

   contenthash：文件内容相关

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   

   


## js垃圾回收机制

JavaScript垃圾回收的机制很简单：找出不再使用的变量，然后释放掉其占用的内存，但是这个过程不是时时的，因为其开销比较大，所以垃圾回收器会按照固定的时间间隔周期性的执行。

##### 标记清除（常用）

当变量进入执行环境是，就标记这个变量为“进入环境”。从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到他们。当变量离开环境时，则将其标记为“离开环境”。

##### 引用计数

相互引用问题



## 性能优化

图片体积压缩

资源内联（图片，字体）

图片加载优化（雪碧图）

渐进式图片（要做到渐进式加载,我们的图片需要是JPEG格式,而JPEG格式的图片又分为两种,我们要做到渐进式加载的话,需要的是Progressive JPEG.）



dns预解析

资源预加载（prefetch）

懒加载



节流防抖



cdn





用户操作体验角度，网页响应快，够流畅（打开页面快，操作延迟小）







**资源加载方面的优化**：加载速度快、少加载、提前加载提前解析

措施：

加载速度（网络快+体积小）：cdn、dns预解析、资源预加载prefetch、缓存（文件指纹），gzip（gzip文件可由前端构建生成）

资源懒加载（按需加载）、打包体积优化（资源拆分+抽取重复引用代码+去掉dead code）

第三方插件的按需引入（babel-plugin-component）

减少请求：资源内联（图标、字体）、节流防抖、雪碧图

优化图片加载：图片压缩、雪碧图、渐进式图片、webp格式图片



**操作和渲染上**

减少dom操作： vdom、多次dom合并

重绘回流问题：尺寸属性获取用缓存变量、多用类属性少用js、尽量减少元素的影响范围



**内存消耗**

较少闭包，手动清理



使用 Chrome Performance 查找性能瓶颈



**优化 SourceMap**

生产环境推荐： cheap-module-source-map



**vue优化**

- 长列表性能优化  ，Object.freeze

  Vue 会通过 Object.defineProperty 对数据进行劫持，来实现视图响应数据的变化，然而有些时候我们的组件就是纯粹的数据展示，不会有任何改变，我们就不需要 Vue 来劫持我们的数据














































> 思路

路由控制的思路有两种，一种是初始化即挂载全部路由，每次路由跳转前做校验；另一种是只挂载用户拥有的路由，相当于从源头上做了控制。

前者的缺点很明显，每次路由跳转都要做一遍校验是对计算资源的浪费，另外对于用户无权访问的路由，理论上就不应该挂载。



> 动态路由

![?wx_fmt=png](../_assets/image/bghjyujkyuik)

从 “获取权限数据” 到 “异步加载路由组件” 之间做的是用户权限初始化，分别用`addRoutes()`方法实现动态路由及菜单，实现全局权限验证方法及指令，以及实现 axios 请求拦截。

![?wx_fmt=png](../_assets/image/grthytjuk)






> 动态菜单

服务端根据用户权限返回相应的用户权限菜单